<!DOCTYPE html>
<head>
  <script>
    function loadAnalytics() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.setAttribute("async", "true");
      script.setAttribute("src", "https://www.googletagmanager.com/gtag/js?id=UA-165890546-1");
      document.documentElement.firstChild.appendChild(script);
    }

    if (document.location.host == 'gcode-preview.web.app') {
      loadAnalytics();

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-165890546-1');
    }
  </script>
  <title>GCode Preview</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body >
  <div class="sidebar" id="app">
    <h1>GCode Preview  <a href="https://www.npmjs.com/package/gcode-preview">
      <img src="https://img.shields.io/npm/v/gcode-preview.svg?style=flat"/>
      </a></h1>
   <div class="scroll-container">
    <div>
      
      <section class="flex flex-column">
        <div class="flex just-between">
          <span>
            Preset
          </span>
          <select id="settings-presets" v-model="selectedPreset">
            <option v-for="(preset, name) in presets" :value="name">{{preset.title}}</option>
          </select>
        </div>
<!-- 
        remove file selector?
        
        <div class="flex just-between">
          <span>
            File
          </span>
          <select id="file-selector">
            <option value="gcodes/benchy.gcode">benchy.gcode</option>
            <option value="gcodes/3DBenchy-Multi-part.gcode">3DBenchy-Multi-part.gcode</option>
            <option value="gcodes/benchy arcs.gcode">benchy arcs.gcode</option>
            <option value="gcodes/mach3.gcode">mach3.gcode</option>
            <option value="gcodes/screw.gcode">screw.gcode</option>
            <option value="gcodes/vase.gcode">vase.gcode</option>
            <option value="gcodes/plant-sign.gcode">plant-sign.gcode</option>
          </select>
        </div> -->
      </section>
      
      <section class="text-center">
        <div class="thumb-wrapper">
          <img id="thumb" alt="thumbnail generated by slicer" />
          <div class="file-info"><span id="layer-count"></span> / <span id="file-size">0MB</span></div>
        </div>
      </section>
      <div class="bulma-tabs bulma-is-small">
        <ul>
          <li :class="{ 'bulma-is-active': activeTab == 'layers' }"><a @click="selectTab('layers')">Layers</a></li>
          <li :class="{ 'bulma-is-active': activeTab == 'travel' }"><a @click="selectTab('travel')">Travel</a></li>
          <li :class="{ 'bulma-is-active': activeTab == 'extrusion' }"><a @click="selectTab('extrusion')">Extrusion</a></li>
          <li :class="{ 'bulma-is-active': activeTab == 'build-volume' }"><a @click="selectTab('build-volume')">Build volume</a></li>
        </ul>
      </div>  
      <div class="panel" v-show="activeTab == 'layers'">
      <section>
        <div class="controls">
          <label>Start layer <output id="start-layer-value" ></output></label>&nbsp;<input
            type="range"
            min="1"
            value="1"
            id="start-layer"
          />
        </div>
        <div class="controls">
          <label>End layer <output id="end-layer-value" ></output></label>&nbsp;<input
            type="range"
            min="1"
            value="0"
            id="end-layer"
          />
        </div>
        <div class="controls">
          <label for="single-layer-mode">Single layer mode</label>
          <input type="checkbox" id="single-layer-mode" />
        </div>
        </section>
      </div>
      <div class="panel" v-show="activeTab == 'travel'">
        <section>
          <div class="controls">
            <label for="travel">Render travel</label>
            <input type="checkbox" id="travel" />
          </div>
          <div class="controls">
            <label for="travel-color">Travel color</label>
            <input type="color" id="travel-color" value="#0000ff" />
          </div>
        </section>
      </div>
      
      <div class="panel" v-show="activeTab == 'extrusion'">
        <section>
          <div class="controls">
            <label for="extrusion">Render extrusion</label
            ><input type="checkbox" id="extrusion" checked />
          </div>
        <div class="controls">
          <label>Line width <output id="line-width-value" ></output></label>&nbsp;<input
            type="range"
            min="1"
            max="50"
            value="1"
            id="line-width"
          />
        </div>
        <div class="controls">
          <label for="render-tubes">Render as tubes</label
          ><input type="checkbox" id="render-tubes" />
        </div>
        <div class="controls">
          <label>Tube width <output id="extrusion-width-value" ></output></label>&nbsp;<input
            type="range"
            min="0.05"
            max="3.0"
            value="0.6"
            step="0.05"
            id="extrusion-width"
          />
        </div>
      </section>

      <section class="extrusion-colors">
        <div class="flex just-between"># of extrusion colors  <div class="controls">
          <button id="add-color">+</button>
          <button id="remove-color">-</button>
        </div></div>
        <div class="controls">
          <label for="extrusion-color-t0">Extrusion color (T0)</label>
          <input type="color" id="extrusion-color-t0" value="#ff0000" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t1">Extrusion color (T1)</label>
          <input type="color" id="extrusion-color-t1" value="#00ff00" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t2">Extrusion color (T2)</label>
          <input type="color" id="extrusion-color-t2" value="#0000ff" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t3">Extrusion color (T3)</label>
          <input type="color" id="extrusion-color-t3" value="#ff00ff" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t4">Extrusion color (T4)</label>
          <input type="color" id="extrusion-color-t4" value="#00ffff" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t5">Extrusion color (T5)</label>
          <input type="color" id="extrusion-color-t5" value="#ffff00" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t6">Extrusion color (T6)</label>
          <input type="color" id="extrusion-color-t6" value="#ff0000" />
        </div>
        <div class="controls">
          <label for="extrusion-color-t7">Extrusion color (T7)</label>
          <input type="color" id="extrusion-color-t7" value="#00ff00" />
        </div>
      </section>
      <section>
        <div class="controls">
          <label for="highlight">Highlight top layer</label
          ><input type="checkbox" id="highlight" />
        </div>
        <div class="controls">
          <label for="top-layer-color">Top layer color</label>
          <input type="color" id="top-layer-color" value="#00ffff" />
        </div>
        <div class="controls">
          <label for="last-segment-color">Last segment color</label>
          <input type="color" id="last-segment-color" value="#ffffff" />
        </div>
      </section>
      </div>
      <div class="panel" v-show="activeTab == 'build-volume'">
      <section>
        <div  class="controls">
          <label for="drawBuildVolume">Render build volume</label
          ><input type="checkbox" id="drawBuildVolume" checked />
        </div>
        <div class="controls">
          <label for="buildVolumeX">Build volume (x)&nbsp;</label
          ><input type="number" id="buildVolumeX" step=10 value=150 />
        </div>
        <div  class="controls">
          <label for="buildVolumeY">Build volume (y)&nbsp;</label
          ><input type="number" id="buildVolumeY" step=10 value=150 />
        </div>
        <div  class="controls">
          <label for="buildVolumeZ">Build volume (z)&nbsp;</label
          ><input type="number" id="buildVolumeZ" step=10 value=150 />
        </div>
        <div class="controls">
          <label for="background-color">Background color</label>
          <input type="color" id="background-color" value="#e0e0e0" />
        </div>
      </section>
      </div>
    </div>

    </div>
    <div>
      <footer>
        <div><a href="http://twitter.com/remcoder">@remcoder</a> ©2020 - 2024</div>

        <div>
          <a href="https://github.com/remcoder/gcode-preview">code</a>
          - <a href="/docs">API docs</a>
          - MIT license
        </div>
      </footer>
    </div>
   </div>
  </div>
  <div class="wrapper">
    <canvas id="renderer" class="gcode-previewer"></canvas>
  </div>
  <div class="dnd">☝️ Drop a gcode file to view it</div>
  
  <script type="importmap">
    {
        "imports": {
            "three": "./build/three/build/three.module.js",
            "gcode-preview": "./build/gcode-preview.es.js",
            "lil-gui": "./build/lil-gui/dist/lil-gui.esm.min.js",
            "vue": "./js/vue.esm-browser.js"
        }
    }
  </script>
  <script type="module">
    import {initDemo} from './js/demo.js';
    import {app} from './js/app.js';
    app();
  </script>
</body>
